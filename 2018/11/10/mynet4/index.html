<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>计算机网络自我总结网络层 | hahabboom</title><meta name="description" content="1. IP地址及其表示方法1. IP地址由互联网名字和数字分配机构ICANN进行分配 A类：  网络可指派 126(2^7 - 2)个，减去IP地址全0这个保留地址 和 127这个环回测试地址（这就不是一个网络地址） 最大主机数 2^24 -2 ，减去全0（所在的网络地址） 和 全1（表示该网络所有主机） 地址空间有2^31个，占50%  B类：  网络可指派 2^14 - 1，减去128.0.0"><meta name="keywords" content="计算机网络"><meta name="author" content="hahabboom"><meta name="copyright" content="hahabboom"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="计算机网络自我总结网络层"><meta name="twitter:description" content="1. IP地址及其表示方法1. IP地址由互联网名字和数字分配机构ICANN进行分配 A类：  网络可指派 126(2^7 - 2)个，减去IP地址全0这个保留地址 和 127这个环回测试地址（这就不是一个网络地址） 最大主机数 2^24 -2 ，减去全0（所在的网络地址） 和 全1（表示该网络所有主机） 地址空间有2^31个，占50%  B类：  网络可指派 2^14 - 1，减去128.0.0"><meta name="twitter:image" content="http://hahabboom.cn/img/article_1_opt.jpg"><meta property="og:type" content="article"><meta property="og:title" content="计算机网络自我总结网络层"><meta property="og:url" content="http://hahabboom.cn/2018/11/10/mynet4/"><meta property="og:site_name" content="hahabboom"><meta property="og:description" content="1. IP地址及其表示方法1. IP地址由互联网名字和数字分配机构ICANN进行分配 A类：  网络可指派 126(2^7 - 2)个，减去IP地址全0这个保留地址 和 127这个环回测试地址（这就不是一个网络地址） 最大主机数 2^24 -2 ，减去全0（所在的网络地址） 和 全1（表示该网络所有主机） 地址空间有2^31个，占50%  B类：  网络可指派 2^14 - 1，减去128.0.0"><meta property="og:image" content="http://hahabboom.cn/img/article_1_opt.jpg"><meta property="article:published_time" content="2018-11-10T06:29:30.000Z"><meta property="article:modified_time" content="2020-12-28T03:07:55.633Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://hahabboom.cn/2018/11/10/mynet4/"><link rel="prev" title="计算机网络自我总结运输层" href="http://hahabboom.cn/2018/11/14/mynet5/"><link rel="next" title="计算机网络自我总结数据链路层" href="http://hahabboom.cn/2018/11/03/mynet3/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.1"></head><body><canvas class="fireworks"></canvas><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">50</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">36</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">23</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li></ul></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-IP地址及其表示方法"><span class="toc-number">1.</span> <span class="toc-text">1. IP地址及其表示方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-IP地址由互联网名字和数字分配机构ICANN进行分配"><span class="toc-number">1.1.</span> <span class="toc-text">1. IP地址由互联网名字和数字分配机构ICANN进行分配</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-IP地址重要特点"><span class="toc-number">1.2.</span> <span class="toc-text">2. IP地址重要特点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-ARP协议（地址解析协议）"><span class="toc-number">2.</span> <span class="toc-text">2. ARP协议（地址解析协议）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-IP数据报"><span class="toc-number">3.</span> <span class="toc-text">3. IP数据报</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-IP数据报首部的固定部分的字段"><span class="toc-number">3.1.</span> <span class="toc-text">1. IP数据报首部的固定部分的字段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-IP数据报首部的可变部分"><span class="toc-number">3.2.</span> <span class="toc-text">2. IP数据报首部的可变部分</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-划分子网和构造超网"><span class="toc-number">4.</span> <span class="toc-text">4. 划分子网和构造超网</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-划分子网"><span class="toc-number">4.1.</span> <span class="toc-text">1. 划分子网</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#子网掩码是一个网络或一个子网的重要属性，划分子网增加了灵活性，但却减少了能够连接在网络上的主机数"><span class="toc-number">4.1.1.</span> <span class="toc-text">子网掩码是一个网络或一个子网的重要属性，划分子网增加了灵活性，但却减少了能够连接在网络上的主机数</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-无分类编址CIDR（构造超网）"><span class="toc-number">4.2.</span> <span class="toc-text">2. 无分类编址CIDR（构造超网）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-CIDR主要特点"><span class="toc-number">4.2.1.</span> <span class="toc-text">1. CIDR主要特点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-网际控制报文协议ICMP"><span class="toc-number">5.</span> <span class="toc-text">5. 网际控制报文协议ICMP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-种类"><span class="toc-number">5.1.</span> <span class="toc-text">1. 种类</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-ICMP差错报告报文"><span class="toc-number">5.1.1.</span> <span class="toc-text">1. ICMP差错报告报文</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-ICMP询问报文"><span class="toc-number">5.1.2.</span> <span class="toc-text">2. ICMP询问报文</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-路由选择协议"><span class="toc-number">6.</span> <span class="toc-text">6. 路由选择协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-理想的路由算法"><span class="toc-number">6.1.</span> <span class="toc-text">1.理想的路由算法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-RIP协议"><span class="toc-number">6.2.</span> <span class="toc-text">2. RIP协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-内部网关协议OSPF"><span class="toc-number">6.3.</span> <span class="toc-text">3. 内部网关协议OSPF</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-外部网关协议BGP"><span class="toc-number">6.4.</span> <span class="toc-text">4. 外部网关协议BGP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-IPv6"><span class="toc-number">6.5.</span> <span class="toc-text">5. IPv6</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-主要变化："><span class="toc-number">6.5.1.</span> <span class="toc-text">1. 主要变化：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-与IPv4相比，IPv6对首部中某些字段进行了如下的更改："><span class="toc-number">6.5.2.</span> <span class="toc-text">2. 与IPv4相比，IPv6对首部中某些字段进行了如下的更改：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-IPv6地址"><span class="toc-number">6.5.3.</span> <span class="toc-text">3. IPv6地址</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-IP多播"><span class="toc-number">7.</span> <span class="toc-text">7. IP多播</span></a></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(/img/article_1_opt.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">hahabboom</a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li></ul></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">计算机网络自我总结网络层</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2018-11-10 14:29:30"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2018-11-10</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-12-28 11:07:55"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-12-28</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h3 id="1-IP地址及其表示方法"><a href="#1-IP地址及其表示方法" class="headerlink" title="1. IP地址及其表示方法"></a>1. IP地址及其表示方法</h3><h4 id="1-IP地址由互联网名字和数字分配机构ICANN进行分配"><a href="#1-IP地址由互联网名字和数字分配机构ICANN进行分配" class="headerlink" title="1. IP地址由互联网名字和数字分配机构ICANN进行分配"></a>1. IP地址由互联网名字和数字分配机构ICANN进行分配</h4><p><img src="/2018/11/10/mynet4/ip.png" alt></p>
<p>A类：</p>
<ol>
<li>网络可指派 126(2^7 - 2)个，减去IP地址全0这个保留地址 和 127这个环回测试地址（这就不是一个网络地址）</li>
<li>最大主机数 2^24 -2 ，减去全0（所在的网络地址） 和 全1（表示该网络所有主机）</li>
<li>地址空间有2^31个，占50%</li>
</ol>
<p>B类：</p>
<ol>
<li>网络可指派 2^14 - 1，减去128.0.0.0，指派B类最小的网络地址128.1.0.0</li>
<li>最大主机数2^16 - 2 (减去全0和全1)</li>
<li>B类地址可指派网络数2^30, 占25%</li>
</ol>
<p>C类：</p>
<ol>
<li>网络可指派2^21 - 1，减去192.0.0.0</li>
<li>最大主机数 2^8 - 2</li>
<li>地址空间 2^29，占12.5%</li>
</ol>
<p><img src="/2018/11/10/mynet4/ip2.png" alt></p>
<h4 id="2-IP地址重要特点"><a href="#2-IP地址重要特点" class="headerlink" title="2. IP地址重要特点"></a>2. IP地址重要特点</h4><ol>
<li>在分配IP地址时只分配网络号，而剩下的主机号由得到网络号的单位自行分配</li>
<li>路由器仅根据目的主机所连接的网络号来转发分组，从而减少路由表所占的存储空间以及查找路由表的时间</li>
<li>多归属主机（具有两个相应的IP地址）</li>
<li>转发器或网桥连接起来的若干个局域网仍为一个网络</li>
<li>互联网平等对待每一个IP地址</li>
</ol>
<h3 id="2-ARP协议（地址解析协议）"><a href="#2-ARP协议（地址解析协议）" class="headerlink" title="2. ARP协议（地址解析协议）"></a>2. ARP协议（地址解析协议）</h3><ol>
<li>用途：</li>
</ol>
<p>为了从网络层使用的IP地址，解析出在数据链路层使用的硬件地址</p>
<ol start="2">
<li><p>要点：</p>
<ol>
<li>每台主机都设有一个ARP高速缓存，里面有的是本局域网上的各主机和路由器的IP地址到硬件地址的映射表</li>
<li>对每一个映射地址都设置生存时间，超过生存时间的项目就从高速缓存中删除掉</li>
<li>ARP是解决同一局域网上的主机或路由器的IP地址和硬件地址的映射问题</li>
<li>如果要找的主机和源主机不在同一局域网，就需要通过同一局域网的路由器转发出去</li>
<li>用户对于这种地址解析的过程是不知道的</li>
</ol>
</li>
</ol>
<h3 id="3-IP数据报"><a href="#3-IP数据报" class="headerlink" title="3. IP数据报"></a>3. IP数据报</h3><p><img src="/2018/11/10/mynet4/iptype.png" alt></p>
<h4 id="1-IP数据报首部的固定部分的字段"><a href="#1-IP数据报首部的固定部分的字段" class="headerlink" title="1. IP数据报首部的固定部分的字段"></a>1. IP数据报首部的固定部分的字段</h4><ol>
<li>版本：4位，通信双方使用的IP协议的版本必须一致。ipv4版本号为4</li>
<li>首部长度：4位，可表示的数值范围：0101 ~ 1111（因为IP首部的固定长度是20字节，首部的单位是32位字 = 4字节， 所以最小值是5；当首部最大值为1111时，首部长度为15*4 = 60字节）<br>首部长度是4字节整数倍，不是整数倍将加以填充字段</li>
<li>区分服务：8位，</li>
<li>总长度：16位,理论上数据报最大长度2^16 - 1 = 65535，但实际上IP协议规定接收长度不超过576字节的数据报（IP首部60字节，数据长度5512字节，4字节富余）</li>
<li>标识：16位，相同的标识字段的值使分片后的各数据报片最后能正确地重装成为原来的数据报</li>
<li>标志：3位，但现在只有两位有意义<br> 最低位MF：MF=1表示后面还有分片，0就说明这是若干数据报片最后一个<br> 中间那位DF：DF=1不能分片，0表示允许分片</li>
<li>片偏移：13位，某片在远分组中的相对位置</li>
<li>生存时间：8位，当TTL=0，就丢弃这个数据报</li>
<li>协议：8位，使目的主机的IP层知道将数据部分上交给哪个协议处理</li>
</ol>
<table>
<thead>
<tr>
<th align="left">协议名</th>
<th align="right">协议字段值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ICMP</td>
<td align="right">1</td>
</tr>
<tr>
<td align="left">IGMP</td>
<td align="right">2</td>
</tr>
<tr>
<td align="left">IP</td>
<td align="right">4</td>
</tr>
<tr>
<td align="left">TCP</td>
<td align="right">6</td>
</tr>
<tr>
<td align="left">EGP</td>
<td align="right">8</td>
</tr>
<tr>
<td align="left">IGP</td>
<td align="right">9</td>
</tr>
<tr>
<td align="left">UDP</td>
<td align="right">17</td>
</tr>
<tr>
<td align="left">IPv6</td>
<td align="right">41</td>
</tr>
<tr>
<td align="left">ESP</td>
<td align="right">50</td>
</tr>
<tr>
<td align="left">OSPF</td>
<td align="right">89</td>
</tr>
</tbody></table>
<ol start="10">
<li>首部校验和：16位，只校验数据报的首部，不包括数据部分</li>
<li>源地址： 32位</li>
<li>目的地址： 32位</li>
</ol>
<h4 id="2-IP数据报首部的可变部分"><a href="#2-IP数据报首部的可变部分" class="headerlink" title="2. IP数据报首部的可变部分"></a>2. IP数据报首部的可变部分</h4><p>选项字段用来支持排错、测量以及安全等措施</p>
<p>增加首部的可变部分是为了增加IP数据报的功能，但这同时也使得IP数据报的首部长度成为可变的。增加了每一个路由器处理数据报的开销</p>
<h3 id="4-划分子网和构造超网"><a href="#4-划分子网和构造超网" class="headerlink" title="4. 划分子网和构造超网"></a>4. 划分子网和构造超网</h3><h4 id="1-划分子网"><a href="#1-划分子网" class="headerlink" title="1. 划分子网"></a>1. 划分子网</h4><h5 id="子网掩码是一个网络或一个子网的重要属性，划分子网增加了灵活性，但却减少了能够连接在网络上的主机数"><a href="#子网掩码是一个网络或一个子网的重要属性，划分子网增加了灵活性，但却减少了能够连接在网络上的主机数" class="headerlink" title="子网掩码是一个网络或一个子网的重要属性，划分子网增加了灵活性，但却减少了能够连接在网络上的主机数"></a>子网掩码是一个网络或一个子网的重要属性，划分子网增加了灵活性，但却减少了能够连接在网络上的主机数</h5><h4 id="2-无分类编址CIDR（构造超网）"><a href="#2-无分类编址CIDR（构造超网）" class="headerlink" title="2. 无分类编址CIDR（构造超网）"></a>2. 无分类编址CIDR（构造超网）</h4><h5 id="1-CIDR主要特点"><a href="#1-CIDR主要特点" class="headerlink" title="1. CIDR主要特点"></a>1. CIDR主要特点</h5><ol>
<li>消除了传统的A类，B类和C类地址以及划分子网的概念</li>
<li>CIDR把网络前缀都相同的连续的IP地址组成一个CIDR地址块</li>
</ol>
<h3 id="5-网际控制报文协议ICMP"><a href="#5-网际控制报文协议ICMP" class="headerlink" title="5. 网际控制报文协议ICMP"></a>5. 网际控制报文协议ICMP</h3><p>ICMP允许主机或路由器报告差错情况和提供有关异常情况的报告。ICMP报文装在IP数据报中，作为其中的数据部分</p>
<h4 id="1-种类"><a href="#1-种类" class="headerlink" title="1. 种类"></a>1. 种类</h4><h5 id="1-ICMP差错报告报文"><a href="#1-ICMP差错报告报文" class="headerlink" title="1. ICMP差错报告报文"></a>1. ICMP差错报告报文</h5><pre><code>1. 终点不可达：路由或主机不能交付数据报时
2. 时间超过：生存时间为0
3. 参数问题：数据报首部中的字段的值不正确
4. 改变路由（重定向）：下次可通过更好的路由</code></pre><h5 id="2-ICMP询问报文"><a href="#2-ICMP询问报文" class="headerlink" title="2. ICMP询问报文"></a>2. ICMP询问报文</h5><pre><code>1. 回送请求和回答：测试目的站是否可达以及了解其有关状态
2. 时间戳请求和回答：用于时钟同步和时间测量</code></pre><h3 id="6-路由选择协议"><a href="#6-路由选择协议" class="headerlink" title="6. 路由选择协议"></a>6. 路由选择协议</h3><h4 id="1-理想的路由算法"><a href="#1-理想的路由算法" class="headerlink" title="1.理想的路由算法"></a>1.理想的路由算法</h4><ol>
<li>算法必须是正确和完整的</li>
<li>算法在计算上应简单</li>
<li>算法应能适应通信量和网络拓扑的变化</li>
<li>算法具有稳定性</li>
<li>算法是公平的</li>
<li>算法是最佳的</li>
</ol>
<h4 id="2-RIP协议"><a href="#2-RIP协议" class="headerlink" title="2. RIP协议"></a>2. RIP协议</h4><p>特点：</p>
<ol>
<li>仅和相邻路由器交换信息</li>
<li>交换的信息就是当前本路由器知道的全部信息</li>
<li>按固定的时间间隔交换路由信息</li>
</ol>
<p>缺点：</p>
<ol>
<li>好消息传的快，而坏消息传的慢</li>
<li>RIP限制了网络的规模，它能使用的最大距离是15（16为不可达）</li>
<li>路由器之间交换的路由信息是路由器中的完整路由表，随着网络规模扩大，开销也就增加</li>
</ol>
<p>优点：<br>实现简单，开销较小</p>
<h4 id="3-内部网关协议OSPF"><a href="#3-内部网关协议OSPF" class="headerlink" title="3. 内部网关协议OSPF"></a>3. 内部网关协议OSPF</h4><p>最主要的特征：<br>使用分布式的链路状态协议</p>
<p>要点（与RIP不同的）：</p>
<ol>
<li><p>向本自治系统中所有路由器发送信息</p>
</li>
<li><p>发送的信息就是本路由器相邻的所有路由器的链路状态</p>
</li>
<li><p>只有当链路状态发生变化时，路由器才向所有路由器用洪泛法发送此信息</p>
</li>
</ol>
<p>除以上外，还有以下特点：</p>
<ol>
<li>OSPF允许管理员给每条路由指派不同的代价</li>
<li>如果到同一个目的网络有多条相同代价的路径，那么可以将通信量分配给这几条路径，这叫多路径间的负载平衡</li>
<li>所有在OSPF路由器之间交换的分组都具有鉴别功能，因而保证了仅在可信赖的路由器之间交换链路状态信息</li>
<li>OSPF支持可变长度的子网划分和无分类编址CIDR</li>
<li>由于网络中的链路状态可能经常发生变化，因此OSPF让每个链路状态都带上一个32位的序号，序号越大状态就越新</li>
</ol>
<p>OSPF的五种分组类型：</p>
<ol>
<li>问候分组：用来发现和维持邻站的可达性</li>
<li>数据库描述分组：向邻站给出自己的链路状态数据库中的所有链路状态项目的摘要信息</li>
<li>链路状态请求分组：向对方请求发送某些链路状态项目的详细信息</li>
<li>链路状态更新分组：用洪泛法对全网更新链路状态</li>
<li>链路状态确认分组：对链路更新分组的确认</li>
</ol>
<p>OSPF规定，每两个相邻路由器每个10秒中就要交换一次问候分组，这样就能知道哪些邻站是可达的</p>
<h4 id="4-外部网关协议BGP"><a href="#4-外部网关协议BGP" class="headerlink" title="4. 外部网关协议BGP"></a>4. 外部网关协议BGP</h4><p>边界网关协议BGP只能是力求寻找一条能够到达目的网络且比较好的路由，而并非要寻找一条最佳路由，BGP采用路径向量路由选择协议</p>
<p>BGP支持无分类域间路由选择CIDR，因此BGP的路由表也就应当包括目的网络前缀、下一跳路由器、以及到达该目的网络所要经过的自治系统序列</p>
<p>BGP刚开始运行时，BGP的邻站是交换整个BGP路由表，但后面只需要在发生变化时更新变化的部分，这样做对节省网络带宽和减少路由器的处理开销有好处</p>
<p>BGP-4四种报文：<br>    1. OPEN（打开）报文：用来与相邻的另一个BGP发言人建立关系，使通信初始化<br>    2. UPDATE（更新）报文：用来通告某一路由的信息，以及列出要撤销的多条路由<br>    3. KEEPALIVE（保活）报文：用来周期性证实邻站的连通性（一般30秒）<br>    4. NOTIFICATION（通知）报文：用来发送检测到的差错</p>
<p>UPDATE报文是BGP的核心内容，撤销路由可以一次撤销许多条，但是增加新路由，每个更新报文只能增加一条</p>
<h4 id="5-IPv6"><a href="#5-IPv6" class="headerlink" title="5. IPv6"></a>5. IPv6</h4><h5 id="1-主要变化："><a href="#1-主要变化：" class="headerlink" title="1. 主要变化："></a>1. 主要变化：</h5><pre><code>1. 更大的地址空间
2. 扩展的地址层次结构
3. 灵活的首部格式
4. 改进的选项
5. 允许协议继续扩充
6. 支持即插即用，即IPv6不需要使用DHCP
7. 支持资源的预分配
8. IPv6首部改为8字节对齐</code></pre><h5 id="2-与IPv4相比，IPv6对首部中某些字段进行了如下的更改："><a href="#2-与IPv4相比，IPv6对首部中某些字段进行了如下的更改：" class="headerlink" title="2. 与IPv4相比，IPv6对首部中某些字段进行了如下的更改："></a>2. 与IPv4相比，IPv6对首部中某些字段进行了如下的更改：</h5><pre><code>1. 取消了首部长度字段，因为它的首部长度是固定的（40字节）
2. 取消了服务类型字段，因为优先级和流标号字段实现了服务类型字段的功能
3. 取消了总长度字段，改用有效载荷长度字段
4. 取消了标识、标志和片偏移字段，因为这些功能已包含在分片扩展首部中
5. 把TTL字段改称为跳数限制字段，但作用都是一样的
6. 取消协议字段，改用下一个首部字段
7. 取消了检验和字段，这样就加快了路由器处理数据报的速度
8. 取消了选项字段，而用扩展首部来实现选项功能</code></pre><h5 id="3-IPv6地址"><a href="#3-IPv6地址" class="headerlink" title="3. IPv6地址"></a>3. IPv6地址</h5><ol>
<li>单播： 点对点通信</li>
<li>多播： 一对多通信</li>
<li>任播： 任播的终点是一组计算机，但数据报只交付其中的一个，通常是距离最近的一个</li>
</ol>
<p>未指明地址：16字节的全0地址，可缩写为两个冒号 <code>::</code> ,这个地址不能用做目的地址，而只能为某台主机作为源地址使用，<br>    条件是这台主机还没有配置到一个标准的IP地址。这类地址仅此一个</p>
<p>环回地址：0:0:0:0:0:0:0:1，可缩写为::1，这类地址仅此一个</p>
<p>多播地址：和IPv4一样，占IPv6地址总数的1/256</p>
<p>本地链路单播地址：有些单位的网络使用TCP/IP协议但并没有连接到互联网上。占IPv6地址总数的1/1024</p>
<p>全球单播地址：可以划分两级：n比特作为子网前缀，剩下的128-n比特作为接口标识符；<br>    可以划分为3级：n比特作为全球路由选择前缀，m比特作为子网前缀，而剩下的128-n-m作为接口标识符</p>
<p>从IPv4到IPv6过渡：</p>
<ol>
<li><p>双协议栈：使一部分主机（或路由器）装有双协议栈</p>
</li>
<li><p>隧道技术：在IPv6数据报进入IPv4网络时，把IPv6数据报封装成Ipv4数据报</p>
</li>
</ol>
<h3 id="7-IP多播"><a href="#7-IP多播" class="headerlink" title="7. IP多播"></a>7. IP多播</h3><ol>
<li>需要两种协议</li>
</ol>
<p>网际组管理协议（IGMP）：强调了本地使用范围。IGMP协议是让连接在本地局域网上的多播路由器知道本局域网上是否有主机参加或退出了某个多播组</p>
<p>多播路由选择协议：<br>    1. 洪泛与剪除（适合较小的多播组，而所有的组成员接入的局域网也是相邻接的）<br>        采用了反向路径广播（RPB）<br>    2. 隧道技术（适合多播组的位置在地理上很分散的情况）<br>    3. 基于核心的发现技术（对于多播组的大小在较大范围内变化都适合）</p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">hahabboom</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://hahabboom.cn/2018/11/10/mynet4/">http://hahabboom.cn/2018/11/10/mynet4/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://hahabboom.cn" target="_blank">hahabboom</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></div><div class="post_share"><div class="social-share" data-image="/img/article_1_opt.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="/img/wechat.jpg" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="post-qr-code__img" src="/img/alipay.jpg" alt="支付寶"/><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2018/11/14/mynet5/"><img class="prev_cover" src="/img/article_6_opt.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">计算机网络自我总结运输层</div></div></a></div><div class="next-post pull_right"><a href="/2018/11/03/mynet3/"><img class="next_cover" src="/img/article_7_opt.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">计算机网络自我总结数据链路层</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2018/11/14/mynet5/" title="计算机网络自我总结运输层"><img class="relatedPosts_cover" src="/img/article_6_opt.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2018-11-14</div><div class="relatedPosts_title">计算机网络自我总结运输层</div></div></a></div><div class="relatedPosts_item"><a href="/2018/11/17/mynet6/" title="计算机网络自我总结计算机网络安全"><img class="relatedPosts_cover" src="/img/article_7_opt.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2018-11-17</div><div class="relatedPosts_title">计算机网络自我总结计算机网络安全</div></div></a></div><div class="relatedPosts_item"><a href="/2018/07/14/netEp1/" title="计算机网络第一章"><img class="relatedPosts_cover" src="/img/article_4_opt.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2018-07-14</div><div class="relatedPosts_title">计算机网络第一章</div></div></a></div><div class="relatedPosts_item"><a href="/2018/07/14/netEp2/" title="计算机网络第二章"><img class="relatedPosts_cover" src="/img/article_3_opt.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2018-07-14</div><div class="relatedPosts_title">计算机网络第二章</div></div></a></div><div class="relatedPosts_item"><a href="/2018/07/23/netEp3/" title="计算机网络第三章"><img class="relatedPosts_cover" src="/img/article_5_opt.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2018-07-23</div><div class="relatedPosts_title">计算机网络第三章</div></div></a></div><div class="relatedPosts_item"><a href="/2018/07/14/netEp4/" title="计算机网络第四章"><img class="relatedPosts_cover" src="/img/article_4_opt.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2018-07-14</div><div class="relatedPosts_title">计算机网络第四章</div></div></a></div></div><div class="clear_both"></div></div></article></main><footer id="footer" style="background-image: url(/img/article_1_opt.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By hahabboom</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script defer id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@3/instantpage.min.js" type="module"></script></body></html>